font:
  in: /Users/peterbaker/work/GitHub/ygt/test/fonts-main/fonts/family_name/monospace/size1/design_2/ttf/Untitled.ttf
  out: /Users/peterbaker/work/GitHub/ygt/test/fonts-main/fonts/family_name/monospace/size1/design_2/ttf/Untitled-hinted.ttf
cvt:
  baseline:
    val: 0
    type: pos
    axis: y
  cap-height:
    val: 896
    type: pos
    axis: y
    cat: Lu
    origin:
      glyph: H
      ptnum:
      - 1
  xheight:
    val: 640
    type: pos
    axis: y
    cat: Ll
    origin:
      glyph: x
      ptnum:
      - 4
  cap-height-overshoot:
    val: 896
    type: pos
    axis: y
    cat: Lu
    same-as:
      below:
        ppem: 40
        cv: cap-height
    origin:
      glyph: O
      ptnum:
      - 3
  cap-baseline-undershoot:
    val: 0
    type: pos
    axis: y
    cat: Lu
    same-as:
      below:
        ppem: 40
        cv: baseline
    origin:
      glyph: O
      ptnum:
      - 0
  xheight-overshoot:
    val: 640
    type: pos
    axis: y
    cat: Ll
    same-as:
      below:
        ppem: 40
        cv: xheight
    origin:
      glyph: o
      ptnum:
      - 3
  lc-baseline-undershoot:
    val: 0
    type: pos
    axis: y
    cat: Ll
    same-as:
      below:
        ppem: 40
        cv: baseline
    origin:
      glyph: o
      ptnum:
      - 0
  lc-ascender:
    val: 896
    type: pos
    axis: y
    cat: Ll
    origin:
      glyph: b
      ptnum:
      - 1
  lc-descender:
    val: -256
    type: pos
    axis: y
    cat: Ll
    origin:
      glyph: p
      ptnum:
      - 0
  num-round-top:
    val: 896
    type: pos
    axis: y
    cat: Nd
    same-as:
      below:
        ppem: 40
        cv: num-flat-top
    origin:
      glyph: eight
      ptnum:
      - 6
  num-baseline-undershoot:
    val: 0
    type: pos
    axis: y
    cat: Nd
    same-as:
      below:
        ppem: 40
        cv: baseline
    origin:
      glyph: eight
      ptnum:
      - 0
  num-flat-top:
    val: 896
    type: pos
    axis: y
    cat: Nd
    origin:
      glyph: five
      ptnum:
      - 9
  x-stem-width:
    axis: x
    type: dist
    val: 128
    origin:
      glyph: A
      ptnum:
      - 0
      - 9
  diagonal-stem-width-corner: &id001
    val: 128
    axis: y
    type: pos
  diagonal-stem-width: *id001
prep:
  code: |-
    <code xmlns="http://xgridfit.sourceforge.net/Xgridfit2">
                <!-- Turn off hinting above 300 ppem -->
                <if test="pixels-per-em &gt; 300">
                    <disable-instructions/>
                </if>
                <!-- Dropout control -->
                <push>4 511</push>
                <command name="SCANCTRL"/>
                <command name="SCANTYPE"/>
                </code>
functions:
  delta:
    primitive: true
    stack-safe: true
    size:
      type: int
      val: 25
    distance:
      type: int
      val: 0
    pt:
      type: point
      subtype: target
    code: |-
      <code xmlns="http://xgridfit.sourceforge.net/Xgridfit2">
              <command name="SDB"/>
              <command name="DUP"/>
              <push>0</push>
              <command name="NEQ"/>
              <command name="IF"/>
              <command name="DUP"/>
              <push>0</push>
              <command name="LT"/>
              <command name="IF"/>
              <push>8</push>
              <command name="ADD"/>
              <command name="ELSE"/>
              <push>7</push>
              <command name="ADD"/>
              <command name="EIF"/>
              <command name="SWAP"/>
              <push>1</push>
              <command name="DELTAP1"/>
              <command name="ELSE"/>
              <command name="POP"/>
              <command name="POP"/>
              <command name="EIF"/>
              <push>8</push>
              <command name="SDB"/>
              </code>
macros:
  hint-corner:
    in-horz:
      type: point
      subtype: target
    out-horz:
      type: point
      subtype: target
    in-vert:
      type: point
      subtype: target
    out-vert:
      type: point
      subtype: target
    code: |
      <code xmlns="http://xgridfit.sourceforge.net/Xgridfit2">
        <with-vectors axis="x">
          <move round="to-half-grid">
            <point num="out-horz"/>
          </move>
        </with-vectors>

        <with-vectors axis="y">
          <move round="to-half-grid">
            <point num="out-vert"/>
          </move>
        </with-vectors>

        <with-projection-vector to-line="orthogonal">
          <line>
            <point num="out-horz"/>
            <point num="out-vert"/>
          </line>

          <with-freedom-vector axis="x">
            <move distance="diagonal-stem-width-corner" round="no">
              <reference>
                <point num="out-horz"/>
              </reference>
              <point num="in-horz"/>
            </move>
          </with-freedom-vector>

          <with-freedom-vector axis="y">
            <move distance="diagonal-stem-width-corner" round="no">
              <reference>
                <point num="out-vert"/>
              </reference>
              <point num="in-vert"/>
            </move>
          </with-freedom-vector>
        </with-projection-vector>
      </code>
glyphs:
  A:
    y:
      points:
      - ptid: 2
        points:
        - ptid:
          - 1
          - 3
          - 4
          rel: shift
        - ptid: 14
          rel: blackdist
          points:
          - ptid:
            - 12
            - 13
            - 15
            rel: shift
      - ptid: 0
        pos: baseline
        points:
        - ptid: 6
          rel: shift
      - ptid: 8
        ref:
        - 2
        - 0
        rel: interpolate
        round: true
        points:
        - ptid: 10
          rel: blackdist
      - ptid:
          in-horz: 14
          out-horz: 2
          in-vert: 15
          out-vert: 11
        macro:
          nm: hint-corner
      - ptid:
          in-horz: 13
          out-horz: 3
          in-vert: 12
          out-vert: 4
        macro:
          nm: hint-corner
    x:
      points:
      - ptid: 0
        points:
        - ptid:
          - 1
          - 2
          rel: shift
        - ptid: 9
          rel: blackdist
          dist: x-stem-width
          points:
          - ptid:
            - 8
            - 10
            - 14
            - 15
            rel: shift
      - ptid: 5
        points:
        - ptid:
          - 3
          - 4
          rel: shift
        - ptid: 6
          rel: blackdist
          dist: x-stem-width
          points:
          - ptid:
            - 7
            - 11
            - 12
            - 13
            rel: shift
